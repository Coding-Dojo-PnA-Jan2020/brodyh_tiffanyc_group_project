{% extends 'layout.html' %}
{% block head_title %}Checkout{% endblock %}

{% import 'bootstrap/wtf.html' as wtf %}

{% block content %}
  <div class="page-header">
    <h1>Checkout</h1>
  </div>

  <h2>Menu Items</h2>
  <table class="table table-borderless table-condensed table-striped">
    <tbody>
      {% for menuitem in menuitems %}
        <tr>
          <td>{{ menuitem.name }}</td>
          <td>
            <div class="row">
              <div class="col-sm-6 col-md-4">
                <img src="https://via.placeholder.com/300x300.png?text=Photo" alt="{{ menuitem.name }}" class="img img-responsive rounded w-100">
              </div>
              <div class="col-sm-6 col-md-8">
                <h2 class="h5 w-100">{{ menuitem.name }}</h2>
                <p>{{ menuitem.description }}</p>
              </div>
            </div>
          </td>
          <td>
            <form action="{{ url_for('cart.remove', id = menuitem.id) }}" method="post">
              <input type="submit" value="Remove" class="btn btn-dark">
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <h2>Order Options</h2>
  <form method="post" action="{{ url_for('orders.create') }}" accept-charset="utf-8" role="form">
    {{ form.csrf_token }}
    {% with errors = get_flashed_messages(category_filter = ['form_errors']) %}
      {% if errors %}
        <div class="alert alert-warning">
          <ul class="list-unstyled">
            {% for error in errors %}
              <li>{{ error }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
    {% endwith %}
    {{ wtf.form_field(form.is_delivery, class = 'form-control', placeholder = 'Delivery?', autofocus = '') }}
    {{ wtf.form_field(form.ready_by, class = 'form-control', placeholder = 'Deliver/pickup by') }}
    <div class="form-group">
      <input type="submit" value="Place Order" class="btn btn-primary mr-2">
    </div>
  </form>
{% endblock %}